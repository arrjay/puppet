<%
   # handy extension lists
   min = [ ".idb", ".sw" ]
   plusdocs = min + [ ".books", ".man" ]
   isdn = plusdocs + [ ".asi" ]
   sw32 = [ ".idb", ".man", ".sw", ".sw32" ]
   sw64m_nd = [ ".idb", ".sw32", ".sw64" ]
   sw64m = sw64m_nd + [ ".man" ]
   sw64_nd = sw64m_nd + [ ".sw" ]
   sw64 = sw64m + [ ".sw" ]
   compiler = sw64 + [ ".hdr" ]
   eoe = compiler + [ ".books", ".src" ]
   plusdocs32 = plusdocs + [ ".sw32" ]
   dmedia = plusdocs32 + [ ".data" ]
   xpg4 = [ ".eoe_man", ".eoe_sw", ".idb" ]

   folders = {
     "disc1" => "S200_6.2_IRIX_1/dist",
   }

   links = {
     "disc1" => {
       "FDDIXPress" => nil,
       "ViewKit_eoe" => sw64,
       "WV_eoe" => sw64,
       "c++_eoe" => sw64,
       "c_eoe" => sw64,
       "cadmin" => nil,
       "compiler_eoe" => compiler,
       "desktop_base" => sw64,
       "dmedia_eoe" => dmedia,
       "dps_eoe" => plusdocs32,
       "efast" => nil,
       "eoe" => eoe,
       "ftn77_eoe" => sw64,
       "ftn90_eoe" => sw64m,
       "goldengate" => sw32,
       "hippi" => plusdocs,
       "il_eoe" => sw32,
       "insight_base" => nil,
       "isdn_eoe" => isdn,
       "io4prom" => min,
       "kernLM_eoe" => min,
       "vino" => nil,
       "x_eoe" => sw64,
       "motif_eoe" => sw64,
       "media_warehouse" => plusdocs,
       "license_eoe" => plusdocs,
       "performer_eoe" => sw64,
       "websupport_eoe" => sw64_nd,
       "xpg4" => xpg4,
     }
   }
  -%>
{
<%# pop the *first* link and treat that one special.  -%>
<% tags = links.keys
   tag0 = tags.pop
   files = links[tag0].keys
   file0 = files.pop 
-%>
 "<%= file0 -%>" : { "target" : "<%= folders[tag0] -%>"<% if links[tag0][file0] -%>, "exts" : [ "<%- l_exts = links[tag0][file0].sort -%>
<%= l_exts.pop -%>"<% unless l_exts.empty?
    l_exts.each{|val| -%>, "<%= val -%>"<% } -%>
 ] <%   end
   end -%>
 }<%# deal with the rest of tag0 now -%><% unless files.empty?
  files.each{|file| -%>,
 "<%= file -%>" : { "target" : "<%= folders[tag0] -%>"<% if links[tag0][file] -%>, "exts" : [ "<%- l_exts = links[tag0][file].sort -%>
<%= l_exts.pop -%>"<% unless l_exts.empty?
    l_exts.each{|val| -%>, "<%= val -%>"<% } -%>
 ]<%   end
   end -%>
 }<% }
  end -%>
,<%# misc entries that don't lend to re-using %>
 "inst.README" : { "target" : "S200_6.2_IRIX_1/dist", "exts" : "none" },
 "inst.init": { "target" : "S200_6.2_IRIX_1/dist", "exts" : "none" },
 "inventor_eoe" : { "target" : "S200_6.2_IRIX_1/dist", "exts" : [ ".data", ".demo", ".idb", ".man", ".sw", ".sw32", ".sw64" ] },
 "sgitcl_eoe" : { "target" : "S200_6.2_IRIX_1/dist", "exts" : [ ".books", ".demos", ".help", ".idb", ".man", ".sw" ] },
 "tooltalk_eoe" : { "target" : "S200_6.2_IRIX_1/dist", "exts" : [ ".books", ".idb", ".man", ".sw", ".sw32", ".sw64"  ] }
}
