<%
   # handy extension lists
   min = [ ".idb", ".sw" ]
   plusdocs = min + [ ".books", ".man" ]
   onlydocs = [ ".idb", ".books", ".man" ]
   isdn = plusdocs + [ ".asi" ]
   headers = min + [ ".man", ".hdr" ]
   sw32 = [ ".idb", ".man", ".sw", ".sw32" ]
   sw64m_nd = [ ".idb", ".sw32", ".sw64" ]
   sw64m = sw64m_nd + [ ".man" ]
   sw64_nd = sw64m_nd + [ ".sw" ]
   sw64 = sw64m + [ ".sw" ]
   compiler = sw64 + [ ".hdr" ]
   compiler_dev = sw64 + [ ".books", ".src" ]
   eoe = compiler + [ ".books", ".src" ]
   plusdocs32 = plusdocs + [ ".sw32" ]
   plusdocs64 = plusdocs32 + [ ".sw64" ]
   dmedia_dev = plusdocs64 + [ ".src" ]
   dmedia = plusdocs32 + [ ".data" ]
   desktop_eoe = plusdocs + [ ".data" ]
   xpg4 = [ ".eoe_man", ".eoe_sw", ".idb" ]
   books = [ ".books", ".idb" ]
   softwin_patch = [ ".SoftWindows2_sw", ".idb" ]
   compiler_patch = [ ".compiler_eoe_hdr", ".compiler_eoe_sw", ".compiler_eoe_sw32", ".compiler_eoe_sw64", ".idb" ]
   eoe_sw_patch = [ ".eoe_sw", ".idb" ]

   folders = {
     # as referenced from /i/6.2/..
     "disc1" => "irix/6.2/S200_6.2_IRIX_1/dist",
     "disc2" => "irix/6.2/S201_6.2_IRIX_2/dist",
     "devel" => "irix/6.2/S300_6.[2-3]_IRIS_Development_Option_7.0.1/dist",
     "apps" => "irix/6.2/S700_6.2_Applications_1996_08/dist",
   }

   links = {
     "disc1" => {
       "FDDIXPress" => nil,
       "ViewKit_eoe" => sw64,
       "WV_eoe" => sw64,
       "c++_eoe" => sw64,
       "c_eoe" => sw64,
       "cadmin" => nil,
       "desktop_base" => sw64,
       "dmedia_eoe" => dmedia,
       "dps_eoe" => plusdocs32,
       "efast" => nil,
       "eoe" => eoe,
       "ftn77_eoe" => sw64,
       "ftn90_eoe" => sw64m,
       "goldengate" => sw32,
       "hippi" => plusdocs,
       "il_eoe" => sw32,
       "insight_base" => nil,
       "isdn_eoe" => isdn,
       "io4prom" => min,
       "kernLM_eoe" => min,
       "vino" => nil,
       "x_eoe" => sw64,
       "motif_eoe" => sw64,
       "media_warehouse" => plusdocs,
       "license_eoe" => plusdocs,
       "performer_eoe" => sw64,
       "websupport_eoe" => sw64_nd,
       "xpg4" => xpg4,
     },
     "disc2" => {
       "4Dwm" => nil,
       "InPerson" => plusdocs,
       "PeoplePages" => plusdocs,
       "desktop_tools" => plusdocs,
       "dynaweb" => plusdocs,
       "fddivis" => nil,
       "imgtools" => plusdocs,
       "isdnadmin" => plusdocs,
       "mmail" => plusdocs,
       "outbox" => plusdocs,
       "print" => nil,
       "showcase" => plusdocs,
       "sysadmdesktop" => nil,
       "sysmon" => plusdocs,
       "systour" => nil,
       "vlan232" => nil,
       "webmagic" => plusdocs,
       "annotator" => desktop_eoe,
       "desktop_eoe" => desktop_eoe,
       "insight" => plusdocs64,
       "insight_gloss" => onlydocs,
       "vli" => nil,
       "webserver" => min,
     },
     "devel" => {
       "CaseVision" => min,
       "ProDev" => min,
       "SpeedShop" => plusdocs,
       "WV_dev" => sw64,
       "WorkShop" => plusdocs64,
       "c_dev" => eoe,
       "cite" => nil,
       "compiler_dev" => compiler_dev,
       "compiler_eoe" => compiler,
       "complib" => headers,
       "dev" => plusdocs64,
       "dmedia_dev" => dmedia_dev,
       "dvdr" => onlydocs,
       "gl_dev" => plusdocs64,
       "impactI2V_dev" => min,
       "inst_dev" => plusdocs,
       "motif_dev" => sw64,
       "sgitcl_dev" => min,
       "x_books" => books,
       "motif_books" => books,
       "patchSG0001384" => compiler_patch,
     },
     "apps" => {
       "cms_eoe" => sw64,
       "demos" => nil,
       "impr_base" => plusdocs,
       "impr_rip" => nil,
       "impr_rip_printers" => nil,
       "impr_scan" => nil,
       "impr_server" => nil,
       "patchSG0001038" => softwin_patch,
       "patchSG0001239" => softwin_patch,
       "patchSG0001281" => eoe_sw_patch,
       "patchSG0001336" => compiler_patch,
       "patchSG0001413" => eoe_sw_patch,
       "patchSG0001456" => eoe_sw_patch,
       "mmailp" => plusdocs,
     }
   }
  -%>
{
<%# pop the *first* link and treat that one special.  -%>
<% tags = links.keys
   tag0 = tags.pop
   files = links[tag0].keys
   file0 = files.pop 
-%>
 "<%= file0 -%>" : { "target" : "<%= folders[tag0] -%>"<% if links[tag0][file0] -%>, "exts" : [ "<%- l_exts = links[tag0][file0].sort -%>
<%= l_exts.pop -%>"<% unless l_exts.empty?
    l_exts.each{|val| -%>, "<%= val -%>"<% } -%>
 ] <%   end
   end -%>
 }<%# deal with the rest of tag0 now -%><% unless files.empty?
  files.each{|file| -%>,
 "<%= file -%>" : { "target" : "<%= folders[tag0] -%>"<% if links[tag0][file] -%>, "exts" : [ "<%- l_exts = links[tag0][file].sort -%>
<%= l_exts.pop -%>"<% unless l_exts.empty?
    l_exts.each{|val| -%>, "<%= val -%>"<% } -%>
 ]<%   end
   end -%>
 }<% }
  end -%>
<%# process remaining tags/files -%>
<% tags.each{|tag|
     files = links[tag].keys
     files.each{|file| -%>,
 "<%= file -%>" : { "target" : "<%= folders[tag] -%>"<% if links[tag][file] -%>, "exts" : [ "<%- l_exts = links[tag][file].sort -%>
<%= l_exts.pop -%>"<% unless l_exts.empty?
       l_exts.each{|val| -%>, "<%= val -%>"<% } -%>
 ]<%     end
   end -%>
 }<%   }
   } -%>
,<%# misc entries that don't lend to re-using %>
 "inst.README" : { "target" : "<%= folders['disc1'] -%>", "exts" : "none" },
 "inst.init": { "target" : "<%= folders['disc1'] -%>", "exts" : "none" },
 "inventor_eoe" : { "target" : "<%= folders['disc1'] -%>", "exts" : [ ".data", ".demo", ".idb", ".man", ".sw", ".sw32", ".sw64" ] },
 "sgitcl_eoe" : { "target" : "<%= folders['disc1'] -%>", "exts" : [ ".books", ".demos", ".help", ".idb", ".man", ".sw" ] },
 "tooltalk_eoe" : { "target" : "<%= folders['disc1'] -%>", "exts" : [ ".books", ".idb", ".man", ".sw", ".sw32", ".sw64"  ] },
 "SoftWindows2" : { "target" : "<%= folders['disc2'] -%>", "exts" : [ ".books", ".hyperhelp", ".idb", ".install", ".lang", ".man", ".sw", ".sw2" ] },
 "acrobat" : { "target" : "<%= folders['disc2'] -%>", "exts" : [ ".dnx", ".idb", ".man", ".sw" ] },
 "netscape" : { "target" : "<%= folders['apps'] -%>", "exts" : [ ".idb", ".man", ".plugin", ".src", ".sw" ] },
 "webspace" : { "target" : "<%= folders['disc2'] -%>", "exts" : [ ".data", ".help", ".idb", ".man", ".sw" ] },
 "whatsnew" : { "target" : "<%= folders['disc2'] -%>", "exts" : [ ".doc", ".idb", ".man", ".registration", ".sw" ] },
 "xlators_3d" : { "target" : "<%= folders['disc2'] -%>", "exts" : [ ".doc", ".idb", ".man", ".sw" ] },
 "irix_dev" : { "target" : "<%= folders['devel'] -%>", "exts" : [ ".gifts", ".idb" ] },
 "license_dev" : { "target" : "<%= folders['devel'] -%>", "exts" : [ ".books", ".demo", ".hdr", ".idb", ".lib", ".lib32", ".lib64", ".man", ".sw" ] },
 "patchSG0001378" : { "target" : "<%= folders['devel'] -%>", "exts" : [ ".ftn77_eoe_sw32", ".ftn77_eoe_sw64", ".ftn_dev_sw32", ".ftn_dev_sw64", ".idb" ] },
 "patchSG0001390" : { "target" : "<%= folders['devel'] -%>", "exts" : [ ".compiler_dev_sw32", ".compiler_dev_sw64", ".compiler_eoe_sw", ".compiler_eoe_sw64", ".idb" ] },
 "x_dev" : { "target" : "<%= folders['devel'] -%>", "exts" : [ ".idb", ".man", ".src", ".sw", ".sw32", ".sw64" ] },
 "impr_dev" : { "target" : "<%= folders['apps'] -%>", "exts" : [ ".books", ".idb", ".man", ".sw", ".sw32", ".sw5_3", ".sw64" ] },
 "patchSG0001270" : { "target" : "<%= folders['apps'] -%>", "exts" : [ ".compiler_eoe_sw", ".compiler_eoe_sw64", ".idb" ] },
 "patchSG0001278" : { "target" : "<%= folders['apps'] -%>", "exts" : [ ".dev_man", ".eoe_man", ".eoe_sw", ".idb" ] },
 "patchSG0001295" : { "target" : "<%= folders['apps'] -%>", "exts" : [ ".eoe1_sw", ".eoe_sw", ".idb" ] },
 "patchSG0001326" : { "target" : "<%= folders['apps'] -%>", "exts" : [ ".desktop_eoe_sw", ".idb" ] },
 "patchSG0001389" : { "target" : "<%= folders['apps'] -%>", "exts" : [ ".eoe_sw", ".idb", ".nfs_sw" ] }
}
