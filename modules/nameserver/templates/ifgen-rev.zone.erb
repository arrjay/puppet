$TTL <%= @_minttl -%>

; NOTE $ORIGIN abuse
@ SOA @ <%= @admin -%> <%= @_serial -%> <%= @_refresh -%> <%= @_retry -%> <%= @_expiry -%> <%= @_nxttl -%>

<% @_nameservers.each do |nameserver| -%>
@	NS	<%= nameserver -%>.<%= @_domain %>
<% end -%>

; Build a zonefile out of...hiera data!
<% @ifdata = scope.function_hiera_hash(['interface']) -%>
<% @ifdata.keys.sort.each do |name| -%>
<% if @ifdata[name]['ip'] -%>
<%= @ifdata[name]['ip'].split('.')[3] -%> PTR <%= name -%>.<%= @_domain %>
<% end -%>
<% end -%>
