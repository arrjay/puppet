$TTL <%= @_minttl -%>

; NOTE $ORIGIN abuse
@ SOA @ <%= @admin -%> <%= @_serial -%> <%= @_refresh -%> <%= @_retry -%> <%= @_expiry -%> <%= @_nxttl -%>

<% @_nameservers.each do |nameserver| -%>
@	NS	<%= nameserver -%>.<%= @_domain %>
<% end -%>

; Build a zonefile out of...hiera data!
<% @ifdata = scope.function_hiera_hash(['interface']) -%>
<% @ifdata.each do |name,keys| -%>
<% if keys['ip'] -%>
<%= keys['ip'].split('.')[3] -%> PTR <%= name -%>.<%= @_domain %>
<% end -%>
<% end -%>
