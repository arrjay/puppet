$TTL <%= @_minttl -%>

; NOTE $ORIGIN abuse
@ SOA @ <%= @admin -%> <%= @_serial -%> <%= @_refresh -%> <%= @_retry -%> <%= @_expiry -%> <%= @_nxttl -%>

<% @_nameservers.each do |nameserver| -%>
@	NS	<%= nameserver -%>

<% end -%>

; Build a zonefile out of...hiera data!
<% @ifdata = scope.function_hiera_hash(['interface']) -%>
<% @ifdata.keys.sort.each do |name| -%>
<% if @ifdata[name]['ip'] -%>
<%= name -%> A <%= @ifdata[name]['ip'] -%>

<% end -%>
<% if @ifdata[name]['desc'] -%>
<%= name -%> TXT "<%= @ifdata[name]['desc'] -%>"
<% end -%>
<% end -%>
