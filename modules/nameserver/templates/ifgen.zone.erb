$TTL <%= @_minttl -%>

; NOTE $ORIGIN abuse
@ SOA @ <%= @_admin -%> <%= @_serial -%> <%= @_refresh -%> <%= @_retry -%> <%= @_expiry -%> <%= @_nxttl -%>

<% @nameservers.each do |nameserver| -%>
@	NS	<%= nameserver -%>

<% end -%>

; Build a zonefile out of...hiera data!
<% @ifdata = scope.function_hiera_hash(['interface']) -%>
<% @ifdata.each do |name,keys| -%>
<% if keys['ip'] -%>
<%= name -%> A <%= keys['ip'] -%>

<% end -%>
<% if keys['desc'] -%>
<%= name -%> TXT "<%= keys['desc'] -%>"
<% end -%>
<% end -%>
