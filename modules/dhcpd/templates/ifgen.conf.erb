<%= scope.function_template(['dhcpd/_header.conf.erb']) -%>

subnet <%= @_network['subnet'] -%> netmask <%= @_network['netmask'] -%> {
  option broadcast-address <%= @_network['broadcast'] -%>;
}

group {
  # routeable
  option routers <%= @_network['gateway'] -%>;
<% interfaces = @_interfaces.keys.sort
   interfaces.each do |name|
     if @_interfaces[name]['routeable'] != false 
       if @_interfaces[name]['macaddr'] -%>
  host <%= name -%> {
    hardware ethernet <%= @_interfaces[name]['macaddr'] -%>;
    fixed-address <%= @_interfaces[name]['ip'] -%>;
  }
<%     end
     end
   end -%>
}

group {
  # non-routeable
<% interfaces.each do |name|
     if @_interfaces[name]['routeable'] == false
       if @_interfaces[name]['macaddr'] -%>
  host <%= name -%> {
    hardware ethernet <%= @_interfaces[name]['macaddr'] -%>;
    fixed-address <%= @_interfaces[name]['ip'] -%>;
  }
<%     end
     end
   end -%>
}
