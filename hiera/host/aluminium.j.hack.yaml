classes:
    - nameserver::ifgen
    - dhcpd
    - tftp
    - lvm

lvm::volume_groups:
    data:
        physical_volumes:
            - /dev/sdb
        logical_volumes:
            mirrors:
                size: 10G
                mountpath: /m

dhcpd::template: 'ifgen'

ipaddr: ENC[PKCS7,MIIBeQYJKoZIhvcNAQcDoIIBajCCAWYCAQAxggEhMIIBHQIBADAFMAACAQEwDQYJKoZIhvcNAQEBBQAEggEAk50T5IQx5g2gUeMD9FRjdo2myWmx+eHrZqq8/dWLbz7lgk+eaKqiqp3/TYuITunN/5LnCDO4EaxHSo9Ia4F4TDmEMIs1xFdipj5EUdwwkDbGnmzTorJQSB/Pcq0e0vseJrXDbmJQgkMCYB7yRnaibxjLk0yk6o3EvV1bA+5ZzuOo7nEoNw1ry64aP0plZbu8mZvJspQCzrqgpq/16F7CvjFTemI++WypQpCUxAV4tLoD7vzFImkC8ScsyRmru9Y6prV9Ig8bY0SxBJ0Zhc+3WN23KAH2IfzVV0FVX4GW3T9bru86xIWBZuXkGWkm2n+qX3hbQyKSLmTcFCwhpaI/8DA8BgkqhkiG9w0BBwEwHQYJYIZIAWUDBAEqBBBqZK6wMF5UiPymWcFJV+bDgBBFpf1fkTQC8yYyTR1XU35O]

resolvconf::nameservers:
    - 127.0.0.1
resolvconf::domain: j.hack

nameserver::addresses:
    - any
    
nameserver::views:
    chaos:
        match-clients:
            - 10.100.252.0/24
        recursion: true
        zones:
            j.hack:
                - type master
                - file "j.hack"
            252.100.10.in-addr.arpa:
                - type master
                - file "252.100.10-j.hack"
            '.':
                - type hint
                - file "named.ca"
    produxi:
        match-clients:
            - 172.16.128.0/24
        recursion: false
        zones:
            chaos.produxi.net:
                - type master
                - file "j.hack"
            252.100.10.in-addr.arpa:
                - type master
                - file "252.100.10-chaos.produxi.net"
    self:
        zones:
            produxi.net:
                - type slave
                - file "slaves/produxi.net"
                - masters { 172.16.128.30; }
            _msdcs.produxi.net:
                - type slave
                - file "slaves/_msdcs.produxi.net"
                - masters { 172.16.128.30; }
            128.16.172.in-addr.arpa:
                - type slave
                - file "slaves/128.16.172.in-addr.arpa"
                - masters { 172.16.128.30; }
            64/26.128.16.172.in-addr.arpa:
                - type slave
                - file "slaves/64-26.128.16.172.in-addr.arpa"
                - masters { 172.16.128.36; }
            dyn.produxi.net:
                - type slave
                - file "slaves/dyn.produxi.net"
                - masters { 172.16.128.36; }
            chaos.produxi.net:
                - type master
                - file "j.hack"
            j.hack:
                - type master
                - file "j.hack"
            252.100.10.in-addr.arpa:
                - type master
                - file "252.100.10-j.hack"
